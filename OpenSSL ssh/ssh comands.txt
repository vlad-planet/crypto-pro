лог емайл:
/var/log/exim4/mainlog


Здравствуйте! 
phpmyadmin находится в файловой системе по адресу: 
/usr/share/phpmyadmin

___________________________________________________________________________________
!!!LINUX ОГРАНИЧЕНИЯ ДОСТУПА К ВЫДЕЛЕНОМУ СЕРВЕРУ SHH!!!
___________________________________________________________________________________
Для проверки прослушиваемых портов, есть утилита netstat. 
Пример:
netstat -tunlp
Настройка портов выполняется в конфигурации служб, как пример ssh, в файле /etc/ssh/sshd_config, параметр port.
Подобное выполняется и на остальных службах.
Используемые порты можно вывести командой netstat -nlp 

По умолчанию на сервере нет сервиса FTP (21 порт), подключение выполняется по SFTP протоколу (22 порт), через программу openssh-server.
Для отключения SFTP доступа в файле: /etc/ssh/sshd_config найдите упоминания об sftp: Subsystem sftp и закомментируйте строку.
Для смены часового пояса, команда: dpkg-reconfigure tzdata

Ограничение на сервере для указанных служб, можно регулировать через встроенный firewall (iptables). 
Проверить текущие правила ограничения iptables -vnL

Чтобы после перезагрузки или Отключение/включение сервера не сбрасывались настроенные правила ограничений, 
установите пакет (скрипт, автоматизирующий выполнение команд iptables-save и iptables-restore при выключении/загрузке сервера) командой:
 apt-get install iptables-persistent

***comment------------------------------------------/BEGIN/
В идеале список правил должен быть такой: 
iptables -A INPUT -m state --state ESTABLISHED,RELATED #разрешаем уже установленные соединения 
iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT #разрешаем подключения с любого IP на порт 22 
iptables -A INPUT -p tcp --source 94.25.25.25 -j ACCEPT #разрешаем подключения с IP 94.25.25.25 на любой порт 
iptables -A INPUT -p tcp -m tcp --source 94.25.25.25 --dport 22 -j ACCEPT #разрешаем подключения с IP 94.25.25.25 на порт 22 
iptables -P INPUT DROP #запрещаем все остальные подключения, которые не разрешены правилами выше.
***-----------------------------------------/END/

***comment------------------------------------------/BEGIN/
Какую БД используете и на каком адресе запускаете? 
Если netstat показал 127.0.0.1. То менять порт не обязательно, подключиться к базе можно только с самого сервера. Если Mysql, то обычно это файл /etc/mysql/my.cnf [client] # изменим порт port = 5890 [mysqld] # изменим порт port = 5890 # разрешим не только локальные подключения (следует закомментить - поставить в строке ниже знак #) # bind-address = 127.0.0.1 # добавим строку - время сессии. 60 секунд на случай сбоя соединения - вполне достаточно. wait_timeout = 60 # запретим серверу получать имя хоста клиента (немного ускоряет работу) skip-name-resolve

phpmyadmin находится в файловой системе по адресу: 
/usr/share/phpmyadmin
***---------------------------------------/END/

запретить все подключения, 
оставить только подключения к серверу по ssh, с ip "94.25.187.83" (служба поддержки 85.143.178.166)
Для данного случая правила будут такими: 
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT (Правило обязательно. Без него не будут корректно работать программы, которым нужно получить ответ от удалённого узла.)
iptables -A INPUT -p tcp -m tcp --source 94.25.25.25 --dport 22 -j ACCEPT 
iptables -P INPUT DROP
Разрешить доступ на 80 порт (для отображения сайтов): 
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 8080 -j ACCEPT

и после изменения правил выполните команду сохранения:
 service iptables-persistent save
в Debian 8 в место "service iptables-persistent save" выполнить команду:
 service netfilter-persistent save

удалить правила с ограничений:
1. Выведите записи в виде нумерации строк: 
iptables -L --line-numbers 
2. Удалите нужный номер строки: 
iptables -D INPUT NUM 
(NUM - это номер строки) 
3. Сохраните правила iptables.

закрыть локальные подключения web сервера:
В файле /etc/apache2/ports.conf 
Заменить: 
Listen 8080 
На: 
Listen 127.0.0.1:8080 
Перезапустить веб сервер: 
/etc/init.d/apache2 restart


***info---------------------------------------/BEGIN/
При создании правила вы можете использовать ключи --source и --destination, чтобы указать IP-адрес-источник и IP-адрес-назначение, соответственно. 

В цепочке INPUT данное поле "--destination" можно использовать, например, если у сервера есть второй IP-адрес, и нужно разрешить подключение на какой-либо порт на один IP-адрес из двух.

В правиле:
 iptables -A INPUT -p tcp -m tcp --source 94.25.25.25 --dport 22 -j ACCEPT указан IP-адрес-источник.
Значение 94.25.25.25 будет отображаться в столбце source вывода команды iptables -L.

FORWARD (используется при прохождении транзитных пакетов через данный сервер) и OUTPUT (используется при отправке пакетов).

Поле --destination обычно используется при создании правил в цепочке OUTPUT. Обычно правила в этой цепочке не создают, разрешая таким образом любые исходящие подключения с сервера. 
правила для ограничения:
 iptables -A OUTPUT -p tcp -m tcp --destination 94.25.25.25 --dport 22 -j ACCEPT

***---------------------------------/END/



Лог авторизации: /var/log/auth.log Просмотреть можно, например: tail -f /var/log/auth.log или cat /var/log/auth.log
_______________________________________________________________________________________
